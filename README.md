# JSNotes
JavaScriptç¬”è®°

## ç›®å½•
* [ES5ä¸­Arrayæ–¹æ³•](#es5ä¸­arrayæ–¹æ³•)
* [callã€applyã€bindåŒºåˆ«](#callapplybindåŒºåˆ«)
* [ç®­å¤´å‡½æ•°ä¸æ™®é€šfunctionåŒºåˆ«](#ç®­å¤´å‡½æ•°ä¸æ™®é€šfunctionåŒºåˆ«)
* [ä½œç”¨åŸŸ](#ä½œç”¨åŸŸ)
* [é—­åŒ…ï¼ˆClosureï¼‰](#é—­åŒ…ï¼ˆclosureï¼‰)

## ES5ä¸­Arrayæ–¹æ³•
### Array.isArray()

> è¿”å›å¸ƒå°”å€¼ï¼Œå¯ä»¥å¼¥è¡¥typeofè¿ç®—ç¬¦çš„ä¸è¶³

	const arr = [1, 2, 3];
	typeof arr // "object"
	Array.isArray(arr) // true
	
### valueOf()

> æ‰€æœ‰å¯¹è±¡éƒ½æ‹¥æœ‰çš„æ–¹æ³•ï¼Œå¯¹è¯¥å¯¹è±¡æ±‚å€¼ï¼Œè¿”å›æ•°ç»„æœ¬èº«
	
	const arr = [1, 2, 3];
	arr.valueOf() // [1, 2, 3]

### toString()

> æ‰€æœ‰å¯¹è±¡éƒ½æ‹¥æœ‰çš„æ–¹æ³•ï¼Œè¿”å›æ•°ç»„çš„å­—ç¬¦ä¸²å½¢å¼
	
	const arr = [1, 2, 3];
	arr.toString() // "1,2,3"
	
	var arr = [1, 2, 3, [4, 5, 6]];
	arr.toString() // "1,2,3,4,5,6"
	
### push()

> åœ¨æ•°ç»„çš„æœ«ç«¯æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œè¿”å›æ·»åŠ æ–°å…ƒç´ åçš„æ•°ç»„é•¿åº¦
> 
> **è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„**

	var arr = [];
	arr.push(1) // 1
	arr.push('a') // 2
	arr.push(true, {}) // 4
	arr // [1, 'a', true, {}]
	
### pop()

> åˆ é™¤æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ 
> 
> **è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„**
> 
> ç©ºæ•°ç»„ä½¿ç”¨popæ–¹æ³•ï¼Œä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯è¿”å›undefined
> 
> pushå’Œpopç»“åˆä½¿ç”¨ï¼Œå°±æ„æˆäº†â€œåè¿›å…ˆå‡ºâ€çš„æ ˆç»“æ„ï¼ˆstackï¼‰

	
	var arr = ['a', 'b', 'c'];
	arr.pop() // 'c'
	arr // ['a', 'b']
	[].pop() // undefined

### shift()

> åˆ é™¤æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›è¯¥å…ƒç´ 
> 
> **è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„**
> 
> å¯ä»¥éå†å¹¶æ¸…ç©ºä¸€ä¸ªæ•°ç»„
> 
> pushå’Œshiftç»“åˆä½¿ç”¨ï¼Œå°±æ„æˆäº†â€œå…ˆè¿›å…ˆå‡ºâ€çš„é˜Ÿåˆ—ç»“æ„ï¼ˆqueueï¼‰

	const a = ['a', 'b', 'c'];
	a.shift()  // 'a'
	a  // ['b', 'c']
	
	const list = [1, 2, 3, 4, 5, 6];
	const item;
	
	while (item = list.shift()) {
	  console.log(item);
	}
	list // []

### unshift()

> åœ¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®æ·»åŠ å…ƒç´ ï¼Œè¿”å›æ·»åŠ æ–°å…ƒç´ åçš„æ•°ç»„é•¿åº¦
> 
> å¯ä»¥æ¥å—å¤šä¸ªå‚æ•°ï¼Œå‚æ•°éƒ½ä¼šæ·»åŠ åˆ°ç›®æ ‡æ•°ç»„å¤´éƒ¨ 
> 
> **è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„**

	const a = ['a', 'b', 'c'];
	a.unshift('x'); // 4
	a // ['x', 'a', 'b', 'c']
	
	const arr = [ 'c', 'd' ];
	arr.unshift('a', 'b') // 4
	arr // [ 'a', 'b', 'c', 'd' ]
	
### join()
> æŒ‡å®šå‚æ•°ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå°†æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²
> 
> ä¸æä¾›å‚æ•°ï¼Œé»˜è®¤ç”¨`,`åˆ†éš”ï¼Œä¸`toString()`ç±»ä¼¼
>
> å¦‚æœæ•°ç»„æˆå‘˜æ˜¯undefinedæˆ–nullæˆ–ç©ºä½ï¼Œä¼šè¢«è½¬æˆç©ºå­—ç¬¦ä¸²

	const a = [1, 2, 3, 4];
	a.join(' ')  // '1 2 3 4'
	a.join(' | ')  // "1 | 2 | 3 | 4"
	a.join()  // "1,2,3,4"
	
	[undefined, null].join('#')  // '#'
	['a',, 'b'].join('-')  // 'a--b'
	
### concat()

> å¤šä¸ªæ•°ç»„åˆå¹¶ï¼Œå°†æ–°æ•°ç»„æ·»åŠ åˆ°åŸæ•°ç»„åé¢ï¼Œè¿”å›æ–°æ•°ç»„ï¼ŒåŸæ•°ç»„ä¸å˜
> 
> å‚æ•°ç±»å‹å¯ä»¥ä¸ºarrayï¼Œobjectï¼Œstringï¼Œnumberï¼Œå‚æ•°å¯ä»¥æ˜¯å¤šä¸ª

	['hello'].concat(['world'])  // ["hello", "world"]
	['hello'].concat(['world'], ['!'])  // ["hello", "world", "!"]
	[].concat({a: 1}, {b: 2})  // [{ a: 1 }, { b: 2 }]
	[2].concat({a: 1})  // [2, {a: 1}]
	[1, 2, 3].concat(4, 5, 6)  // [1, 2, 3, 4, 5, 6]

**==== æ•²é»‘æ¿ğŸ‘ğŸ‘ğŸ‘åˆ’é‡ç‚¹â—ï¸â—ï¸â—ï¸====**
> å¦‚æœæ•°ç»„æˆå‘˜åŒ…æ‹¬å¯¹è±¡ï¼Œconcatæ–¹æ³•è¿”å›å½“å‰æ•°ç»„çš„ä¸€ä¸ªæµ…æ‹·è´
> 
> æµ…æ‹·è´æŒ‡çš„æ˜¯æ–°æ•°ç»„è¿”å›çš„æ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼ŒåŸå¯¹è±¡æ”¹å˜ï¼Œæ–°æ•°ç»„ä¹Ÿä¼šå˜

	const obj = { a: 1 };
	const oldArray = [obj];
	let newArray = oldArray.concat();
	obj.a = 2;
	newArray[0].a  // 2 è€Œä¸æ˜¯1

### reverse()

> å°†æ•°ç»„å…ƒç´ å€’åºæ’åˆ—ï¼Œè¿”å›æ”¹å˜åçš„æ•°ç»„
> 
> **è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„**
	
	const a = ['a', 'b', 'c'];
	a.reverse() // ["c", "b", "a"]
	a // ["c", "b", "a"]
	
### slice()
	
	arr.slice(start, end);

> æå–æ•°ç»„ä¸­æŸä¸€éƒ¨åˆ†ï¼Œå‰åŒ…åä¸åŒ…ï¼ŒåŸæ•°ç»„ä¸å˜
> 
> ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºèµ·å§‹ä½ç½®ï¼ˆä»0å¼€å§‹ï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºç»ˆæ­¢ä½ç½®
> 
> å‚æ•°æ˜¯è´Ÿæ•°ï¼Œä»åé¢è®¡ç®—ä½ç½®

	const a = ['a', 'b', 'c'];
	a.slice(0)  // ["a", "b", "c"]
	a.slice(1)  // ["b", "c"]
	a.slice(1, 2)  // ["b"]
	a.slice(2, 6)  // ["c"]
	a.slice()  // ["a", "b", "c"]
	
	// -2è¡¨ç¤ºå€’æ•°è®¡ç®—çš„ç¬¬äºŒä¸ªä½ç½®
	a.slice(-2) // ["b", "c"]
	a.slice(-2, -1) // ["b"]
	a.slice(4) // []

> sliceæ–¹æ³•çš„ä¸€ä¸ªé‡è¦åº”ç”¨ï¼Œæ˜¯å°†ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„

	Array.prototype.slice.call({ 0: 'a', 1: 'b', length: 2 })  // ['a', 'b']

	Array.prototype.slice.call(document.querySelectorAll("div"));
	Array.prototype.slice.call(arguments);

### splice()
	
	arr.splice(start, count, addElement1, addElement2, ...);
	// ä»æŸä¸ªä½ç½®å¼€å§‹ï¼Œåˆ é™¤å…ƒç´ ä¸ªæ•°ï¼Œæ·»åŠ å…ƒç´ ...

> åˆ é™¤æ•°ç»„ä¸­æŸä¸€éƒ¨åˆ†æˆå‘˜ï¼Œå¹¶å¯ä»¥åœ¨åˆ é™¤çš„ä½ç½®æ·»åŠ æ–°çš„æ•°ç»„æˆå‘˜
> 
> è¿”å›è¢«åˆ é™¤çš„å…ƒç´ 
> 
> **è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„**

	
	const a = ['a', 'b', 'c', 'd', 'e', 'f'];
	a.splice(4, 2)  // ["e", "f"]
	a  // ["a", "b", "c", "d"]
	
	a.splice(4, 2, 1, 2)  // ["e", "f"]
	a  // ["a", "b", "c", "d", 1, 2]
	
	a.splice(-4, 2)  // ["c", "d"]
	
	// æ’å…¥å…ƒç´ ï¼Œcountè®¾ç½®ä¸º0
	const a = [1, 1, 1];
	a.splice(1, 0, 2)  // []
	a  // [1, 2, 1, 1]
	
	// åªæœ‰1ä¸ªå‚æ•°ï¼Œå°†åŸæ•°ç»„åœ¨æŒ‡å®šä½ç½®æ‹†åˆ†æˆä¸¤ä¸ªæ•°ç»„
	const a = [1, 2, 3, 4];
	a.splice(2) // [3, 4]
	a // [1, 2]
			
### sort()

> å¯¹æ•°ç»„æˆå‘˜è¿›è¡Œæ’åºï¼Œé»˜è®¤æŒ‰ç…§å­—å…¸é¡ºåºæ’
> 
> **è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„**

	['d', 'c', 'b', 'a'].sort()  // ['a', 'b', 'c', 'd']
	[4, 3, 2, 1].sort()  // [1, 2, 3, 4]
	[11, 101].sort()  // [101, 11]
	[10111, 1101, 111].sort()  // [10111, 1101, 111]
	
	[10111, 1101, 111].sort(function (a, b) {
	  return a - b;
	})
	// [111, 1101, 10111]
	
	[
	  { name: "å¼ ä¸‰", age: 30 },
	  { name: "æå››", age: 24 },
	  { name: "ç‹äº”", age: 28  }
	].sort(function (o1, o2) {
	  return o1.age - o2.age;
	})
	// [
	//   { name: "æå››", age: 24 },
	//   { name: "ç‹äº”", age: 28  },
	//   { name: "å¼ ä¸‰", age: 30 }
	// ]

### every
> æ•°ç»„ä¸­æ¯ä¸€é¡¹éƒ½ç¬¦åˆåˆ¤æ–­æ¡ä»¶è¿”å›true
>
> `[].every(() => {})` è¿”å›trueï¼Œå›è°ƒå‡½æ•°ä¸ä¼šæ‰§è¡Œ
> 
> å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®šå‚æ•°å‡½æ•°å†…éƒ¨çš„thiså˜é‡

	const a = [1, 2, 3, 4, 5, 6]
	a.every(it => it > 0)  // true
   	a.every(it => it > 5 ) // false

### some
> æ•°ç»„ä¸­æŸä¸€é¡¹æ»¡è¶³åˆ¤æ–­æ¡ä»¶è¿”å›true
>
> `[].some(() => {})` è¿”å›falseï¼Œå›è°ƒå‡½æ•°ä¸ä¼šæ‰§è¡Œ
> 
> å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®šå‚æ•°å‡½æ•°å†…éƒ¨çš„thiså˜é‡

	const a = [1, 2, 3, 4, 5, 6]
	a.some(it => it > 0)  // true
   	a.some(it => it > 5 ) // true

### map

	 arr1.map((it, index, arr1) => {}, arr2)

> åŸæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ æ‰§è¡Œcallbackåè¿”å›æ–°æ•°ç»„
>
> å¯ä»¥é€šè¿‡callbackæ”¹å˜åŸæ•°ç»„

   	const a = [1, 2, 3, 4, 5, 6]
	a.map(it => it * 2)  // [2, 4, 6, 8, 10, 12]
	a.map(it => it > 2)  // [false, false, true, true, true, true]

> ç¬¬äºŒä¸ªå‚æ•°ï¼ˆarr2ï¼‰ï¼Œç”¨æ¥ç»‘å®šå›è°ƒå‡½æ•°å†…éƒ¨çš„thiså˜é‡

	const arr = ['a', 'b', 'c'];

	[1, 2].map(function (e) {
	  return this[e];
	}, arr)
	// ['b', 'c']  å°†å›è°ƒå‡½æ•°å†…éƒ¨çš„thiså¯¹è±¡ï¼ŒæŒ‡å‘arræ•°ç»„

> å¦‚æœæ•°ç»„æœ‰ç©ºä½ï¼Œmapæ–¹æ³•çš„å›è°ƒå‡½æ•°åœ¨è¿™ä¸ªä½ç½®ä¸ä¼šæ‰§è¡Œï¼Œä¼šè·³è¿‡æ•°ç»„çš„ç©ºä½
> 
> ä¸ä¼šè·³è¿‡`undefined`å’Œ`null`
	
	const f = n => 'a';
	[1, undefined, 2].map(f)  // ["a", "a", "a"]
	[1, null, 2].map(f)  // ["a", "a", "a"]
	[1, , 2].map(f)  // ["a", , "a"]

### forEach
	 ä¸mapç”¨æ³•ç›¸ä¼¼
	 arr1.forEach((it, index, arr1) => {}, arr2)

> å°†åŸæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€æ¬¡callbackå‡½æ•°ï¼Œæ— è¿”å›å€¼ï¼Œforå¾ªç¯çš„ç®€åŒ–ç‰ˆ
>
> å¯ä»¥é€šè¿‡callbackå‡½æ•°æ›´æ”¹åŸæ•°ç»„

	const a = [1, 2, 3, 4, 5, 6]
	a.forEach((it, index) => a[index] = it * 2)
	console.log(a)  // [2, 4, 6, 8, 10, 12] 

	const out = [];
	[1, 2, 3].forEach(function(it) {
	  this.push(it * it);
	}, out);
	out // [1, 4, 9]  å›è°ƒå‡½æ•°å†…éƒ¨çš„thiså…³é”®å­—å°±æŒ‡å‘out
	
	// è·³è¿‡æ•°ç»„çš„ç©ºä½ï¼Œä¸ä¼šè·³è¿‡undefinedå’Œnull
	const log = n => console.log(n + 1);
	  	
	[1, undefined, 2].forEach(log)
	// 2
	// NaN
	// 3
	
	[1, null, 2].forEach(log)
	// 2
	// 1
	// 3
	
	[1, , 2].forEach(log)
	// 2
	// 3

**==== æ•²é»‘æ¿ğŸ‘ğŸ‘ğŸ‘åˆ’é‡ç‚¹â—ï¸â—ï¸â—ï¸====**

> forEachæ–¹æ³•æ— æ³•ä¸­æ–­æ‰§è¡Œï¼Œä¼šå°†æ‰€æœ‰æˆå‘˜éå†å®Œ
> 
> å¦‚æœå¸Œæœ›ç¬¦åˆæŸç§æ¡ä»¶æ—¶ï¼Œå°±ä¸­æ–­éå†ï¼Œè¦ä½¿ç”¨forå¾ªç¯

	const arr = [1, 2, 3];

	for (let i = 0; i < arr.length; i++) {
	  if (arr[i] === 2) break;
	  console.log(arr[i]);
	}
	// 1  forEachæ— æ³•å®ç°	

### filter
 
	 arr1.map((it, index, arr1) => {}, arr2)

> å°†åŸæ•°ç»„ä¸­ç¬¦åˆåˆ¤æ–­æ¡ä»¶çš„è¿”å›åˆ°æ–°æ•°ç»„
> 
> arr2æ”¹å˜thisç»‘å®š

	const a = [1, 2, 3, 4, 5, 6]
	a.filter(it => it > 2)   // [3, 4, 5, 6]
	a.filter(it => it > 6)   // []
	
	// è¿”å›æ•°ç»„é‡Œæ‰€æœ‰å¸ƒå°”å€¼ä¸ºtrueçš„æˆå‘˜
	[0, 1, 'a', false].filter(Boolean)  // [1, "a"]
	
	// æ”¹å˜thisç»‘å®š
	const obj = { MAX: 3 };
	const myFilter = item => {
	  if (item > this.MAX) return true;
	};
	const arr = [2, 8, 3, 4, 1, 3, 2, 9];
	arr.filter(myFilter, obj)  // [8, 4, 9]
	
### reduce()
	arr.reduce((total, it, index, arr) => {}, initTotal)
> å°†æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼ˆä»å·¦åˆ°å³ï¼‰åº”ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå°†å…¶å‡å°‘ä¸º1ä¸ªå€¼
>
> å›è°ƒå‡½æ•°æœ‰4ä¸ªå‚æ•°
>
> * total ç´¯åŠ å™¨ç´¯åŠ å›è°ƒçš„è¿”å›å€¼ï¼Œä¸Šæ¬¡å›è°ƒçš„å’Œï¼Œå¿…é¡»
> * it å½“å‰å…ƒç´ ï¼Œå¿…é¡»
> * index ç´¢å¼•
> * arr åŸæ•°ç»„
> 
> reduceç¬¬äºŒä¸ªå‚æ•°
> 
> * ç´¯è®¡å˜é‡çš„åˆå§‹å€¼ï¼Œitä¼šä»æ•°ç»„ç¬¬ä¸€ä¸ªå¼€å§‹ï¼Œå¤„ç†ç©ºæ•°ç»„æ—¶æœ‰ç”¨

 	const a = [1, 2, 3, 4, 5, 6]
	a.reduce((total, it) => total + it)  // 21
	
	[1, 2, 3, 4, 5].reduce((a, b) => a + b, 10);  // 25

	function add(prev, cur) {
	  return prev + cur;
	}
	
	[].reduce(add)
	// TypeError: Reduce of empty array with no initial value
	[].reduce(add, 1)
	// 1
	
> å¦‚æœåˆ¤æ–­æ¡ä»¶åªæ“ä½œitï¼Œä¸æ“ä½œtotalï¼Œå°†ä¼šåªå¤„ç†æ•°ç»„æœ€åä¸€é¡¹

	const a = [1, 2, 3, 4, 5, 6]
	a.reduce((total, it) => it * 2)  // 12

### reduceRight()

> å°†æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼ˆä»å³åˆ°å·¦ï¼‰åº”ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå°†å…¶å‡å°‘ä¸º1ä¸ªå€¼ï¼Œå…¶ä½™å’Œreduceç”¨æ³•ä¸€æ ·

	const fun = (prev, cur) => prev - cur;
	
	[3, 2, 1].reduce(fun)  // 0  ç›¸å½“äº3-2-1
	[3, 2, 1].reduceRight(fun)  // -4  ç›¸å½“äº 1-2-3

### indexOf()	
> 1ä¸ªå‚æ•°æ—¶ï¼Œæ‰¾åˆ°è¿”å›ç´¢å¼•å€¼ï¼Œæœªæ‰¾åˆ°è¿”å›`-1`
> 
> 2ä¸ªå‚æ•°æ—¶ï¼Œä»ç´¢å¼•ä½ç½®å¼€å§‹æŸ¥æ‰¾ï¼Œæœªæ‰¾åˆ°è¿”å›`-1`

	const a = [1, 2, 3, 4, 5, 1]
	a.indexOf(1)  // 0
	a.indexOf(5)  // 4
	
### lastIndexOf()	

> è¿”å›ç»™å®šå…ƒç´ åœ¨æ•°ç»„ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°åˆ™è¿”å›-1
	
	const a = [2, 5, 9, 2];
	a.lastIndexOf(2)  // 3
	a.lastIndexOf(7)  // -1
**==== æ•²é»‘æ¿ğŸ‘ğŸ‘ğŸ‘åˆ’é‡ç‚¹â—ï¸â—ï¸â—ï¸====**
> `indexOf()``lastIndexOf()`ä¸èƒ½ç”¨æ¥æœç´¢NaNçš„ä½ç½®ï¼Œå®ƒä»¬æ— æ³•ç¡®å®šæ•°ç»„æˆå‘˜æ˜¯å¦åŒ…å«NaN
> 
> æ–¹æ³•å†…éƒ¨ï¼Œä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ===ï¼‰è¿›è¡Œæ¯”è¾ƒï¼ŒNaNæ˜¯å”¯ä¸€ä¸€ä¸ªä¸ç­‰äºè‡ªèº«çš„å€¼

	[NaN].indexOf(NaN) // -1
	[NaN].lastIndexOf(NaN) // -1
	
## callã€applyã€bindåŒºåˆ«
#### ç›¸åŒç‚¹
> æ”¹å˜å‡½æ•°thiså¯¹è±¡çš„æŒ‡å‘
>
> ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯thisè¦æŒ‡å‘çš„å¯¹è±¡
>
> éƒ½å¯ä»¥åˆ©ç”¨åç»­å‚æ•°ä¼ å‚

#### åŒºåˆ«
> è¿”å›å€¼
>
> * callå’Œapplyéƒ½æ˜¯å¯¹å‡½æ•°çš„ç›´æ¥è°ƒç”¨
> * bindè¿”å›å‡½æ•°ï¼Œåé¢è¿˜éœ€è¦åŠ ()æ¥è¿›è¡Œè°ƒç”¨
>
> å‚æ•°
>
> * callçš„åç»­å‚æ•°ä¸è°ƒç”¨çš„ä¸€ä¸€å¯¹åº”ï¼Œcall(a,b,c)
> * applyçš„åç»­å‚æ•°ä¸ºæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„å€¼ä¸è°ƒç”¨çš„ä¸€ä¸€å¯¹åº”ï¼Œapply(a,[b,c])
> * bindéœ€è¦åŠ ï¼ˆï¼‰æ‰è°ƒç”¨ï¼Œbind(a)(b,c)

#### æ— å‚æ•°è°ƒç”¨

	const xw = {
    name: "å°ç‹",
    gender: "ç”·",
    age: 24,
    say: function(){
        alert(this.name+" , "+this.gender+" ,ä»Šå¹´"+this.age);
    	}
	}
	const xg = {
	    name: "å°éƒ­",
	    gender: "å¥³",
	    age: 18
	}
	xw.say();  // å°ç‹,ç”·,ä»Šå¹´24

	// ç”¨xwçš„say()æ˜¾ç¤ºxgçš„æ•°æ®
	xw.say.call(xg);
	xw.say.apply(xg);
	xw.say.bind(xg)();

#### ä¼ å‚æ•°è°ƒç”¨
	const xw = {
    name: "å°ç‹",
    gender: "ç”·",
    age: 24,
    say: function(school, grade){
        alert(this.name+" , "+this.gender+" ,ä»Šå¹´"+this.age + this. school + this. grade);
    	}
	}

	const xg = {
	    name: "å°éƒ­",
	    gender: "å¥³",
	    age: 18
	}

	// ç”¨xwçš„say()æ˜¾ç¤ºxgçš„æ•°æ®
	xw.say.call(xg, 'ç¾å›½æ–¯å¦ç¦', 'ç ”ä¸€');
	xw.say.apply(xg, ['ç¾å›½æ–¯å¦ç¦', 'ç ”ä¸€']);
	xw.say.bind(xg,"å®éªŒå°å­¦","å…­å¹´çº§")();
	xw.say.bind(xg)('ç¾å›½æ–¯å¦ç¦', 'ç ”ä¸€');

## ç®­å¤´å‡½æ•°ä¸æ™®é€šfunctionåŒºåˆ«
#### 1ã€å†™æ³•ç®€æ´
> æ–¹æ³•åªæœ‰ä¸€ä¸ªå‚æ•°å¯çœç•¥å°æ‹¬å·()
>
> æ–¹æ³•ä½“åªæœ‰ä¸€è¡Œå¯çœç•¥å¤§æ‹¬å·{}

	const a = [1, 2, 3]
	const b = arr.map(function (it) {
	  return it;
	});

	const b = arr.map(it => it);  // ç›¸å½“äº (it) => { return it; }

#### 2ã€â—ï¸ä¸ç»‘å®šthis
> åœ¨ç®­å¤´å‡½æ•°å‡ºç°ä¹‹å‰ï¼Œæ¯ä¸ªæ–°å®šä¹‰çš„å‡½æ•°éƒ½æœ‰å…¶è‡ªå·±çš„ this å€¼ï¼ˆä¾‹å¦‚ï¼Œæ„é€ å‡½æ•°çš„ this æŒ‡å‘äº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼›
>
> <font color="red">ä¸¥æ ¼æ¨¡å¼</font>ä¸‹çš„å‡½æ•°çš„ this å€¼ä¸º undefinedï¼Œå¦‚æœå‡½æ•°æ˜¯ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¢«è°ƒç”¨çš„ï¼Œåˆ™å…¶ this æŒ‡å‘äº†é‚£ä¸ªè°ƒç”¨å®ƒçš„å¯¹è±¡ï¼‰
>
> **ç®­å¤´å‡½æ•°ä¼šæ•è·æ‰€åœ¨ä¸Šä¸‹æ–‡çš„ this å€¼ï¼Œä½œä¸ºè‡ªå·±çš„ this å€¼**
>
> **ä½¿ç”¨ callã€apply è°ƒç”¨å‡½æ•°æ—¶ï¼Œåªæ˜¯ä¼ å…¥å‚æ•°ï¼Œå¯¹ this æ— å½±å“**

	const adder = {
	  base : 1,

	  add : function(a) {
	    const f = v => v + this.base;
	    return f(a);
	  },

	  addCall: function(a) {
	    const f = v => v + this.base;
	    const b = {
	      base : 2
	    };

	    return f.call(b, a);
	  }
	};

	console.log(adder.add(1)); // è¾“å‡º 2
	console.log(adder.addCall(1)); // ä»ç„¶è¾“å‡º 2ï¼ˆè€Œä¸æ˜¯3ï¼Œcallä¼ å…¥çš„thisæ— æ•ˆï¼‰

#### 3ã€ä¸ç»‘å®š<font color="red">argumentså¯¹è±¡</font>

> ç®­å¤´å‡½æ•°ä¸ä¼šåœ¨å…¶å†…éƒ¨æš´éœ²å‡º arguments å¯¹è±¡ï¼Œ
>
> arguments.length, arguments[0], arguments[1] ç­‰ç­‰éƒ½ä¸ä¼šæŒ‡å‘ç®­å¤´å‡½æ•°çš„ arguments ï¼Œè€Œæ˜¯æŒ‡å‘äº†ç®­å¤´å‡½æ•°æ‰€åœ¨ä½œç”¨åŸŸçš„ä¸€ä¸ªåä¸º arguments çš„å€¼
>
> ç®­å¤´å‡½æ•°æ‰€åœ¨ä½œç”¨åŸŸå¦‚æœæ²¡æœ‰åä¸º arguments çš„å€¼ï¼Œè¿”å›undefined

	function fun() {
	  return arguments[1];
	}

	fun(2) // undefined
	fun(2, 3)  // 3

	const arguments = 1;
	const fun = () => arguments;
	fun(3)  // 1 (æŒ‡å‘ä½œç”¨åŸŸä¸­çš„ arguments)

	function foo() {
	  const f = () => arguments[0];
	  return f(2);
	}
	foo(1); // 1 (æŒ‡å‘ä½œç”¨åŸŸä¸­çš„ arguments)

#### 4ã€ä¸ä¼šå˜é‡æå‡

	console.log(fun1());  // 1
	function fun1() {
		return 1;
	}

	console.log(fun2());  // æŠ¥é”™ fun2 is not defined
	const fun2 = () => 2


## ä½œç”¨åŸŸ
### å…¨å±€ä½œç”¨åŸŸ
> å…¨å±€å˜é‡ï¼š ä¼šæŒ‚è½½åˆ° window å¯¹è±¡ä¸Š
> 
> ç”Ÿå‘½å‘¨æœŸå°†å­˜åœ¨äºæ•´ä¸ªç¨‹åºä¹‹å†…ã€‚
> 
> èƒ½è¢«ç¨‹åºä¸­ä»»ä½•å‡½æ•°æˆ–è€…æ–¹æ³•è®¿é—®ã€‚
> 
> åœ¨ JavaScript å†…é»˜è®¤æ˜¯å¯ä»¥è¢«ä¿®æ”¹çš„ã€‚
> 
> å‡½æ•°å¦‚æœä¸ç»è¿‡å°è£…ï¼Œä¹Ÿä¼šæ˜¯å…¨å±€å˜é‡ï¼Œä»–çš„ç”Ÿå‘½å‘¨æœŸä¹Ÿå°±æ˜¯å…¨å±€ä½œç”¨åŸŸ

#### 1ã€æ˜¾ç¤ºå£°æ˜
> å¸¦æœ‰å…³é”®å­— var çš„å£°æ˜

	var testValue = 123;
   	var testFunc = function () { console.log('just test') };

    console.log(window.testFunc)		// Æ’ () { console.log('just test') }
    console.log(window.testValue)		// 123
    
#### 2ã€éšå¼å£°æ˜
> ä¸å¸¦æœ‰å£°æ˜å…³é”®å­—çš„å˜é‡ï¼ŒJS ä¼šé»˜è®¤å¸®ä½ å£°æ˜ä¸€ä¸ªå…¨å±€å˜é‡ï¼ï¼ï¼

	function foo(value) {
      result = value + 1;	 // æ²¡æœ‰ç”¨ var ä¿®é¥°
      return result;
    };

    foo(123);				// 124
    console.log(window.result);  // 124 <=  æŒ‚åœ¨äº† windowå…¨å±€å¯¹è±¡ä¸Š 
### å‡½æ•°ä½œç”¨åŸŸ
> å‡½æ•°ä½œç”¨åŸŸå†…ï¼Œå¯¹å¤–æ˜¯å°é—­çš„ï¼Œä»å¤–å±‚çš„ä½œç”¨åŸŸæ— æ³•ç›´æ¥è®¿é—®å‡½æ•°å†…éƒ¨çš„ä½œç”¨åŸŸ

	function bar() {
	  var testValue = 'inner';
	}
	console.log(testValue);		// æŠ¥é”™ï¼šReferenceError: testValue is not 

#### 1ã€é€šè¿‡ return è®¿é—®å‡½æ•°å†…éƒ¨å˜é‡
	
	function bar(value) {
	  var testValue = 'inner';
	  return testValue + value;
	}
	
	console.log(bar('fun'));	// "innerfun"
	
#### 2ã€é€šè¿‡ é—­åŒ… è®¿é—®å‡½æ•°å†…éƒ¨å˜é‡
	
	function bar(value) {
	  var testValue = 'inner';
	  
	  var rusult = testValue + value;
	  
	  function innser() {
	     return rusult;
	  };
	  
	  return innser();
	}
	
	console.log(bar('fun'));		// "innerfun"
	
#### 3ã€è‡ªæ‰§è¡Œå‡½æ•°ï¼ˆåˆ›é€ ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸï¼‰
	
	(function() {
      var testValue = 123;
      var testFunc = function () { console.log('just test'); };

    })();

    console.log(window.testValue);		// undefined
    console.log(window.testFunc);		// undefined

### å—çº§ä½œç”¨åŸŸ
> ç”¨const letå…³é”®å­—å£°æ˜ï¼Œåˆ›å»ºå—çº§ä½œç”¨åŸŸçš„æ¡ä»¶æ˜¯å¿…é¡»æœ‰ä¸€ä¸ª { } åŒ…è£¹

	for(var i = 0; i < 5; i++) {
	  // ...
	}
	
	console.log(i)	// 5   
	
	// ç”¨ var å…³é”®å­—å£°æ˜çš„å˜é‡ï¼Œåœ¨ for å¾ªç¯ä¹‹åä»ç„¶è¢«ä¿å­˜è¿™ä¸ªä½œç”¨åŸŸé‡Œ
	for() { }ä»ç„¶åœ¨ï¼Œå…¨å±€ä½œç”¨åŸŸé‡Œï¼Œå¹¶æ²¡æœ‰äº§ç”Ÿåƒå‡½æ•°ä½œç”¨åŸŸä¸€æ ·çš„å°é—­æ•ˆæœ 
	
	å¦‚æœæƒ³è¦å®ç° å—çº§ä½œç”¨åŸŸ ç”¨ let å…³é”®å­—å£°æ˜
	for(let i = 0; i < 5; i++) {
	  // ...
	}
	
	console.log(i)	// æŠ¥é”™ï¼šReferenceError: i is not defined

### è¯æ³•ä½œç”¨åŸŸ
> åœ¨ä½ å†™ä»£ç æ—¶å°†å˜é‡å’Œå—ä½œç”¨åŸŸå†™åœ¨å“ªé‡Œæ¥å†³å®šï¼Œä¹Ÿå°±æ˜¯è¯æ³•ä½œç”¨åŸŸæ˜¯é™æ€çš„ä½œç”¨åŸŸï¼Œåœ¨ä½ ä¹¦å†™ä»£ç æ—¶å°±ç¡®å®šäº†
> 
> eval()å’Œwithå¯ä»¥é€šè¿‡å…¶ç‰¹æ®Šæ€§ç”¨æ¥â€œæ¬ºéª—â€è¯æ³•ä½œç”¨åŸŸï¼Œä¸è¿‡æ­£å¸¸æƒ…å†µä¸‹éƒ½ä¸å»ºè®®ä½¿ç”¨ï¼Œä¼šäº§ç”Ÿæ€§èƒ½é—®é¢˜ã€‚

### ===ä¸¾æ —å­ğŸŒ°====
#### 1ã€å£°æ˜æå‡
	
	function testOrder(arg) {
	    console.log(arg); // argæ˜¯å½¢å‚ï¼Œä¸ä¼šè¢«é‡æ–°å®šä¹‰
	    console.log(a); // å› ä¸ºå‡½æ•°å£°æ˜æ¯”å˜é‡å£°æ˜ä¼˜å…ˆçº§é«˜ï¼Œæ‰€ä»¥è¿™é‡Œaæ˜¯å‡½æ•°
	    var arg = 'hello'; // var arg;å˜é‡å£°æ˜è¢«å¿½ç•¥ï¼Œ arg = 'hello'è¢«æ‰§è¡Œ
	    var a = 10; // var a;è¢«å¿½è§†; a = 10è¢«æ‰§è¡Œï¼Œaå˜æˆnumber
	    function a() {
	        console.log('fun');
	    } // è¢«æå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨
	    console.log(a); // è¾“å‡º10
	    console.log(arg); // è¾“å‡ºhello
	}; 
	
	testOrder('hi');
	
	/* è¾“å‡ºï¼š
	hi 
	function a() { console.log('fun');}
	10 
	hello 
	*/	
	
	// ä¸‹é¢ä¸¤ç§å†™æ³•ç­‰åŒ
	function test(arg){
        // 1. å½¢å‚ arg æ˜¯ "hi"
        // 2. function argå£°æ˜æå‡ï¼Œarg æ˜¯ function
		console.log(arg);  // [function : arg]
		var arg = 'hello';
	        // 3. arg æ­¤æ—¶æ˜¯ "hello"
		function arg(){
			console.log('hello world') 
		}
		console.log(arg);    // hello
	}
	test('hi');
	
	// æ›´å®¹æ˜“ç†è§£
	function test(arg){
	  var arg;
	  arg = function(){
	    console.log('hello world');
	  }
	  console.log(arg);
	  arg = 'hello';
	  console.log(arg);
	}
	test('hi');
		
#### 2ã€å—çº§ä½œç”¨åŸŸ
	
è¦æ±‚å¯¹ä»£ç è¿›è¡Œä¿®æ”¹ï¼Œä½¿å…¶è¾“å‡º'0 1 2 3 4'

	for (var i = 0; i < 5; i++) {
	    setTimeout(function() {
	        console.log(i);
	    }, 1000);
	}
	// 5 5 5 5 5
	
	è¿™é‡Œçš„ i æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸé‡Œé¢çš„ï¼Œåªå­˜åœ¨ 1 ä¸ªå€¼ï¼Œç­‰åˆ°å›è°ƒå‡½æ•°æ‰§è¡Œæ—¶ï¼Œç”¨è¯æ³•ä½œç”¨åŸŸæ•è·çš„ i å°±	åªèƒ½æ˜¯ 5ï¼›

1ã€	let åˆ›å»ºå—çº§ä½œç”¨åŸŸ

	for(let i = 0; i < 5; i++) {
	    setTimeout(function() {
	      console.log(i);
	    }, 200);
	};
2ã€ é‡‡ç”¨è‡ªæ‰§è¡Œå‡½æ•°ï¼Œåˆ›å»ºå‡½æ•°ä½œç”¨åŸŸ
	
	// ä»¥ä¸‹2ç§éƒ½å¯ä»¥
	for (var i = 0; i < 5; i++) {
	    setTimeout(function() {
	        console.log(i);
	    }(i), 1000);
	}
	
	for(var i = 0; i < 5; i++) {
	  (function(j) {
	    setTimeout(function() {
	      console.log(j);
	    }, 200);
	  })(i);
	};

3ã€	è°ƒç”¨å‡½æ•°ï¼Œåˆ›å»ºå‡½æ•°ä½œç”¨åŸŸ
> ç›¸å½“äºåˆ›å»ºäº†5ä¸ªå‡½æ•°ä½œç”¨åŸŸæ¥ä¿å­˜ i å€¼

	for(var i = 0; i < 5; i++) {
	  abc(i);
	};
	
	function abc(i) {
	  setTimeout(function() {
	     console.log(i);			// 0 1 2 3 4 
	  }, 200); 
	}

## é—­åŒ…ï¼ˆClosureï¼‰

> é—­åŒ…å°±æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°

### äº§ç”Ÿé—­åŒ…
> åˆ›å»ºé—­åŒ…æœ€å¸¸è§æ–¹å¼ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨åˆ›å»ºå¦ä¸€ä¸ªå‡½æ•°ã€‚ä¸‹é¢ä¾‹å­ä¸­çš„ closure å°±æ˜¯ä¸€ä¸ªé—­åŒ…
> 
> é—­åŒ…çš„ä½œç”¨åŸŸé“¾åŒ…å«ç€å®ƒè‡ªå·±çš„ä½œç”¨åŸŸï¼Œä»¥åŠåŒ…å«å®ƒçš„å‡½æ•°çš„ä½œç”¨åŸŸå’Œå…¨å±€ä½œç”¨åŸŸã€‚

	function func(){
		var a = 1,b = 2;
		function closure(){
			return a+b;
	  	}
		return closure;
	}

### é—­åŒ…æ³¨æ„äº‹é¡¹
> 1ã€é€šå¸¸ï¼Œå‡½æ•°çš„ä½œç”¨åŸŸåŠå…¶æ‰€æœ‰å˜é‡éƒ½ä¼šåœ¨å‡½æ•°æ‰§è¡Œç»“æŸåè¢«é”€æ¯ã€‚ä½†æ˜¯ï¼Œåœ¨åˆ›å»ºäº†ä¸€ä¸ªé—­åŒ…ä»¥åï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨åŸŸå°±ä¼šä¸€ç›´ä¿å­˜åˆ°é—­åŒ…ä¸å­˜åœ¨ä¸ºæ­¢ã€‚
> 
> 2ã€é—­åŒ…åªèƒ½å–å¾—åŒ…å«å‡½æ•°ä¸­ä»»ä½•å˜é‡çš„æœ€åä¸€ä¸ªå€¼ï¼Œè¿™æ˜¯å› ä¸ºé—­åŒ…æ‰€ä¿å­˜çš„æ˜¯æ•´ä¸ªå˜é‡å¯¹è±¡ï¼Œè€Œä¸æ˜¯æŸä¸ªç‰¹æ®Šçš„å˜é‡
> 

3ã€é—­åŒ…ä¸­çš„ this å¯¹è±¡
	
	var name = "The Window";

	var obj = {
	  name: "My Object",
	  
	  getName: function(){
	    return function(){
	      return this.name;
	    };
	  }
	};
	
	console.log(obj.getName()());  // The Window
	
	obj.getName()()å®é™…ä¸Šæ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸä¸­è°ƒç”¨äº†åŒ¿åå‡½æ•°ï¼ŒthisæŒ‡å‘äº†windowã€‚åŒ¿åå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒå…·æœ‰å…¨å±€æ€§ï¼Œå› æ­¤å…¶ this å¯¹è±¡é€šå¸¸æŒ‡å‘ windowã€‚

### é—­åŒ…çš„åº”ç”¨

1ã€è®¾è®¡ç§æœ‰çš„æ–¹æ³•å’Œå˜é‡ã€å®šä¹‰æ¨¡å—

> ä»»ä½•åœ¨å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡ï¼Œéƒ½å¯ä»¥è®¤ä¸ºæ˜¯ç§æœ‰å˜é‡ï¼Œå› ä¸ºä¸èƒ½åœ¨å‡½æ•°å¤–éƒ¨è®¿é—®è¿™äº›å˜é‡ã€‚ç§æœ‰å˜é‡åŒ…æ‹¬å‡½æ•°çš„å‚æ•°ã€å±€éƒ¨å˜é‡å’Œå‡½æ•°å†…å®šä¹‰çš„å…¶ä»–å‡½æ•°
> 
> æŠŠæœ‰æƒè®¿é—®ç§æœ‰å˜é‡çš„å…¬æœ‰æ–¹æ³•ç§°ä¸ºç‰¹æƒæ–¹æ³•ï¼ˆprivileged methodï¼‰

	function Animal(){
	  // ç§æœ‰å˜é‡
	  var series = "å“ºä¹³åŠ¨ç‰©";
	  function run(){
	    console.log("Run!!!");
	  }
	  
	  // ç‰¹æƒæ–¹æ³•
	  this.getSeries = function(){
	    return series;
	  };
	}

2ã€åŒ¿åå‡½æ•°æœ€å¤§çš„ç”¨é€”æ˜¯åˆ›å»ºé—­åŒ…ï¼Œå¹¶ä¸”è¿˜å¯ä»¥æ„å»ºå‘½åç©ºé—´ï¼Œä»¥å‡å°‘å…¨å±€å˜é‡çš„ä½¿ç”¨ã€‚ä»è€Œä½¿ç”¨é—­åŒ…æ¨¡å—åŒ–ä»£ç ï¼Œé•¿ä¹…ä¿å­˜å˜é‡ï¼Œå‡å°‘å…¨å±€å˜é‡çš„æ±¡æŸ“

	var objEvent = objEvent || {};
	(function(){ 
	var addEvent = function(){ 
	// some code
	};
	function removeEvent(){
	// some code
	}
		
	objEvent.addEvent = addEvent;
	objEvent.removeEvent = removeEvent;
	})();
	
	addEvent å’Œ removeEvent éƒ½æ˜¯å±€éƒ¨å˜é‡ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡å…¨å±€å˜é‡ objEvent ä½¿ç”¨å®ƒï¼Œè¿™å°±å¤§å¤§å‡å°‘äº†å…¨å±€å˜é‡çš„ä½¿ç”¨ï¼Œå¢å¼ºäº†ç½‘é¡µçš„å®‰å…¨æ€§ã€‚

3ã€é—­åŒ…è®¡æ•°å™¨

	var countNumber = (function(){
	  var num = 0;
	  return function(){
	    return ++num;
	  };
	})();	

### é—­åŒ…çš„ç¼ºé™·
* å¸¸é©»å†…å­˜ä¼šå¢å¤§å†…å­˜ä½¿ç”¨é‡ï¼Œå¹¶ä¸”ä½¿ç”¨ä¸å½“å¾ˆå®¹æ˜“é€ æˆå†…å­˜æ³„éœ²ã€‚
* å¦‚æœä¸æ˜¯å› ä¸ºæŸäº›ç‰¹æ®Šä»»åŠ¡è€Œéœ€è¦é—­åŒ…ï¼Œåœ¨æ²¡æœ‰å¿…è¦çš„æƒ…å†µä¸‹ï¼Œåœ¨å…¶å®ƒå‡½æ•°ä¸­åˆ›å»ºå‡½æ•°æ˜¯ä¸æ˜æ™ºçš„ï¼Œå› ä¸ºé—­åŒ…å¯¹è„šæœ¬æ€§èƒ½å…·æœ‰è´Ÿé¢å½±å“ï¼ŒåŒ…æ‹¬å¤„ç†é€Ÿåº¦å’Œå†…å­˜æ¶ˆè€—

	




	
	
	


	
	


    


    

	








